## 개인 프로젝트


## 감정 분석형 채팅 애플리케이션 "EMOSATION"

## 프로젝트 설명
  NLP 자연어 처리를 통한 메세지 데이터를 받아 어떤감정인지 도출해내고 텍스트로 감정을 풀어내는 한계를 어느정도 풀어내고자 기획해보았습니다.

## 개발 환경
* java(java17)
* Spring Boot 3.3.5
* window11
* jpa
* javascript
* OracleDB


## DB테이블 설명
1. **회원 정보 테이블 (User)**  
   - 회원 정보를 담을 `User` 테이블을 생성하였습니다.

2. **채팅방 테이블 (ChatRoom)**  
   - 채팅방 내의 유저 정보와 메시지 기록을 담기 위해 `ChatRoom` 테이블을 만들어주었습니다.
  
3. **메시지 테이블 (Message)**  
   - 메시지를 담을 `Message` 테이블을 생성하였으나, 문제가 발생하였습니다
     - 한 사용자`User`는 여러 개의 채팅방(`ChatRoom`)에 참여할 수 있어야하고
     - 한 채팅방`ChatRoom`에는 여러 명의 사용자가 참여하고 여러개의 메세지를 가질수 있어야합니다.
     - 이렇게 다대다 관계가 형성이 되었는데 관계형데이터베이스 에서는 다대다 관계는 없습니다.
     - 물론 @ManyToMany 어노테이션을 쓰면 가능은하였지만 뒤에서 알수없는 쿼리문이 중간에 새로운테이블을 만들고있었습니다.
    
    
  4. **다대다 문제 풀어내기**
     - 문제를 보면 user 여러 객체가 하나의 chatroom을 쓴다는건 문제가 되지 않습니다.
     - 그렇지만 user는 여러개의 채팅방을 가질수 있어야합니다 요즘 나오는 sns들이 대부분 그렇듯이..
     - 그렇게하면 결국 다대다 관계 형성인데 그래서 고안한게 RoomInUser라는 중간 조인테이블을 만들어주는것이었습니다
     - RoomInUser에서는 여러개의 user를 참조하고 여러개의 chatroom을 참조할수있습니다
     - ![image](https://github.com/user-attachments/assets/c99824af-fb31-41b7-8feb-844cc29f2ed2)

     - 보면 room_id하나에 여러명이 존재할수있고 또 room_id 21 1번 2번 유저가 들어가있을수있습니다.
     - 그 전에 User에서는 mappedby를 통해 부모를 User로 설정해주고  roomInUser객채를 리스트 형식으로 List<RoomInUser>  가질수 있습니다. 즉 유저 하나는 roomInUser를 리스트로 가질수있다. 일대다 관계
     - chatRoom에서도 User테이블에서와 마찬가지로 일대다 관계를 설정해주면서 문제가 마무리되었습니다.
     

     
